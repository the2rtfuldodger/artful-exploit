#!/usr/bin/python3
from socket import *
from ipaddress import *
import sys
import netutils

# port scanner
def port_scan(port, host):
    s = socket(AF_INET, SOCK_STREAM)
    try:
        s = s.connect((host, port))
        print("Port ", port, " is open")
        return True
    except:
        pass
        return False

if __name__ == "__main__":
    iprange = netutils.ips_in_range(sys.argv[1], sys.argv[2])
    print(str(iprange))
    ports = [80, 443, 22, 3361]
    for ip in iprange:
        if True: #for ip in ipn.hosts():
            print("IP: " + str(ip))
            rdns = netutils.reverse_dns(ip)
            print("IP %s - DNS result %s" % (ip, rdns))
            for p in ports:
                pass #port_scan(p, str(ip))
